{"version":3,"file":"index.js","sources":["../../index.js","../index.js"],"sourcesContent":["\"use strict\";\n\n/*\n * Creates the actual typing effect and returns a promise.\n *\n * @param {node} element\n * @param {object} options\n * @returns {Promise}\n */\nfunction type(element, options) {\n  element.removeAttribute(\"data-typing-effect\");\n  element.removeAttribute(\"style\");\n\n  return new Promise(resolve => {\n    (function type() {\n      const el = element.querySelector(\"span[style]\");\n\n      if (el) {\n        el.removeAttribute(\"style\");\n\n        setTimeout(type, options.speed);\n      } else {\n        if (options.reset) {\n          reset(element);\n        }\n\n        resolve();\n      }\n    })();\n  });\n}\n\n/*\n * Sets the innerHTML of the given element back to its original value\n * and removes the aria-label attribute afterwards.\n *\n * @param {node} element\n */\nfunction reset(element) {\n  element.innerHTML = element.getAttribute(\"aria-label\");\n  element.removeAttribute(\"aria-label\");\n}\n\n/**\n * Wraps every character in every entry of the given elements array\n * in a span and hides it.\n *\n * @param {array} elements\n */\nfunction prepareElements(elements) {\n  elements.forEach(element => {\n    let tagOpen = false;\n    const text = element.innerHTML\n      .trim()\n      .replace(/\\s{2,}/g, \" \")\n      .replace(/(\\r\\n|\\n|\\r)/gm, \"\");\n    let html = \"\";\n\n    if (!element.hasAttribute(\"data-typing-effect\")) {\n      element.style = \"visibility: hidden;\";\n    }\n\n    element.setAttribute(\"aria-label\", text);\n\n    for (let k = 0; k < text.length; k += 1) {\n      if (text.charAt(k) === \"<\") tagOpen = true;\n\n      if (tagOpen) {\n        html += text.charAt(k);\n      } else {\n        html += `<span aria-hidden=\"true\" style=\"visibility: hidden\">${text.charAt(\n          k\n        )}</span>`;\n      }\n\n      if (text.charAt(k) === \">\") tagOpen = false;\n    }\n\n    element.innerHTML = html;\n  });\n}\n\n/**\n * @param {node or array} elements\n * @param {object} options\n */\nexport default function(\n  elements,\n  { speed = 30, delay = 300, reset = true } = {}\n) {\n  const options = {\n    speed,\n    delay,\n    reset\n  };\n  let i = 0;\n\n  if (!(elements instanceof Array)) {\n    elements = [elements];\n  }\n\n  if (elements.length === 0) return;\n\n  prepareElements(elements);\n\n  return new Promise(resolve => {\n    (function iterate(index) {\n      type(elements[index], options).then(() => {\n        i += 1;\n\n        if (i < elements.length) {\n          setTimeout(() => {\n            iterate(i);\n          }, options.delay);\n        } else {\n          resolve();\n        }\n      });\n    })(i);\n  });\n}\n","import type from \"../index.js\";\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  type(Array.from(document.querySelectorAll(\"[data-typing-effect]\")), {\n    speed: 20,\n    delay: 200,\n    reset: false\n  }).then(() => document.querySelector(\"footer\").removeAttribute(\"hidden\"));\n});\n"],"names":["elements","speed","delay","reset","options","i","Array","length","forEach","element","tagOpen","text","innerHTML","trim","replace","html","hasAttribute","style","setAttribute","k","charAt","prepareElements","Promise","resolve","iterate","index","removeAttribute","type","el","querySelector","setTimeout","getAttribute","then","document","addEventListener","from","querySelectorAll"],"mappings":"yBAsFe,WACbA,GACAC,MAAEA,EAAQ,GAAEC,MAAEA,EAAQ,IAAGC,MAAEA,GAAQ,GAAS,IAE5C,MAAMC,EAAU,CACdH,MAAAA,EACAC,MAAAA,EACAC,MAAAA,GAEF,IAAIE,EAAI,EAMR,GAJML,aAAoBM,QACxBN,EAAW,CAACA,IAGU,IAApBA,EAASO,OAIb,OAxDF,SAAyBP,GACvBA,EAASQ,QAAQC,IACf,IAAIC,GAAU,EACd,MAAMC,EAAOF,EAAQG,UAClBC,OACAC,QAAQ,UAAW,KACnBA,QAAQ,iBAAkB,IAC7B,IAAIC,EAAO,GAENN,EAAQO,aAAa,wBACxBP,EAAQQ,MAAQ,uBAGlBR,EAAQS,aAAa,aAAcP,GAEnC,IAAK,IAAIQ,EAAI,EAAGA,EAAIR,EAAKJ,OAAQY,GAAK,EACb,MAAnBR,EAAKS,OAAOD,KAAYT,GAAU,GAGpCK,GADEL,EACMC,EAAKS,OAAOD,0DAE2CR,EAAKS,OAClED,YAImB,MAAnBR,EAAKS,OAAOD,KAAYT,GAAU,GAGxCD,EAAQG,UAAYG,IAyBtBM,CAAgBrB,GAET,IAAIsB,QAAQC,KACjB,SAAUC,EAAQC,IAjGtB,SAAchB,EAASL,GAIrB,OAHAK,EAAQiB,gBAAgB,sBACxBjB,EAAQiB,gBAAgB,SAEjB,IAAIJ,QAAQC,KACjB,SAAUI,IACR,MAAMC,EAAKnB,EAAQoB,cAAc,eAE7BD,GACFA,EAAGF,gBAAgB,SAEnBI,WAAWH,EAAMvB,EAAQH,SAErBG,EAAQD,OAgBpB,SAAeM,GACbA,EAAQG,UAAYH,EAAQsB,aAAa,cACzCtB,EAAQiB,gBAAgB,cAjBhBvB,CAAMM,GAGRc,KAZJ,MA6FEI,CAAK3B,EAASyB,GAAQrB,GAAS4B,KAAK,MAClC3B,GAAK,GAEGL,EAASO,OACfuB,WAAW,KACTN,EAAQnB,IACPD,EAAQF,OAEXqB,MATN,CAYGlB,KCpHP4B,SAASC,iBAAiB,mBAAoB,KAC5CP,EAAKrB,MAAM6B,KAAKF,SAASG,iBAAiB,yBAA0B,CAClEnC,MAAO,GACPC,MAAO,IACPC,OAAO,IACN6B,KAAK,IAAMC,SAASJ,cAAc,UAAUH,gBAAgB"}